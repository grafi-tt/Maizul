# CPUアーキテクチャのメモ
清水駿介

初め書いてたのとは似ても似つかない感じに

In-order Issue，Out-of-order completionのアーキテクチャ．演算器のパイプラインレジスタに書き込み対象とするレジスタのタグを保持しておいて，命令デコード時に各演算器に保持されたタグとオペランドのタグを比較することでストールおよびフォワーディングを行う．ストールは，全て命令デコード時に行う．

ALU，FPU，メモリのそれぞれの実行時間を固定．floorなども，書き込み対象のレジスタがGPRなので，分類上はALUとする．GPRはALUとメモリの二系統からの書き込みが同時に可能で，FPRはFPUとメモリの二系統から同時に書き込み可能．なのでfloorをハードウェア実装するなら一クロックで回って欲しい．

分岐予測は命令フェッチ部に入れ込んでしまえば，データパスを全く変えずに実装可能．多分G-Shareを実装する．キャッシュは，キャッシュからの書き込み用のポートをレジスタに備えてやれば多分実装できる．割り込みの実装は，正確な割り込みを実現するにしても，多分ジャンプの実装と大体同じなので現状ではそんなに困難じゃない．もっとも割り込みはちゃんと検討してないので全く自信が無い．
