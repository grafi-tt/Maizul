# C Simulator
投げやりなシミュレータ．必要最低限なこと以外何もしてないので遅くはない．

ソースコードがISAの設計方針の理解に役立つよう，とにかく速く動くように命令デコードするというより、ある程度コアが行っているのに近いやり方で分かりやすく命令デコードを行っている．

## 制限
ブロックRAMへの書き込みにまだ対応してなかった気がする．

## ビルド方法
現在1ファイルに雑に書いてしまっているし，コンパイル時，あるいは実行時に指定できるようにするべきフラグがソースコードに書き込まれてしまっている．適当にファイルを分けて見やすくしないと．

なお，非標準の2進数リテラルを使っているので，GCC 4.3以上くらいや新しめのLLVMじゃないとコンパイルできない．

## サンプル
samplesディレクトリに，機械語入力を示したテキストと，テキストを実際のバイナリに変換するRubyスクリプトがある．

    ruby binary.rb < hoge.txt > hoge

で，hogeというファイルにシミュレータの引数として渡すことのできるバイナリが出力される．

## 実行方法
    csim hoge

ステップ実行フラグを有効にしてコンパイルした場合は，命令一つ一つがステップ実行される．（この挙動はあまりに適当で，現実的には使いものにならない．まともなブレークポイントの実装が求められる）

    r<0-31>
    mem<自然数>

という形式の入力をしてエンターすると，そこに現在保存されている値が表示される．何も入力せずにエンターすると，次の命令を実行する．
